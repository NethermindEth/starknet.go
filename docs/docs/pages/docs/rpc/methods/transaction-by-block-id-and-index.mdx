# TransactionByBlockIdAndIndex

Gets the details of a transaction by specifying the block and the transaction's index within that block.

## Method Signature

```go
func (provider *Provider) TransactionByBlockIdAndIndex(ctx context.Context, blockID BlockID, index uint64) (*BlockTransaction, error)
```

## Parameters

- `ctx` - Context for request cancellation and timeout
- `blockID` - Block identifier (number, hash, or tag)
- `index` - Transaction index within the block (0-based)

## BlockID Parameter

This method requires a `BlockID` parameter. The RPC package provides helper functions to create BlockID:

```go
// Using block number
blockID := rpc.WithBlockNumber(123456)

// Using block hash
hash, _ := new(felt.Felt).SetString("0x1234...")
blockID := rpc.WithBlockHash(hash)

// Using block tag
blockID := rpc.WithBlockTag("latest")
```

## Returns

- `*BlockTransaction` - Complete transaction details
- `error` - Error if the request fails

## Usage Example

```go
package main

import (
    "context"
    "encoding/json"
    "fmt"
    "log"
	"os"

    "github.com/NethermindEth/starknet.go/rpc"
)

func main() {
    // Create RPC client
	// Get RPC URL from environment variable
	rpcURL := os.Getenv("STARKNET_RPC_URL")
	if rpcURL == "" {
		log.Fatal("STARKNET_RPC_URL not set in environment")
	}

	ctx := context.Background()
    client, err := rpc.NewProvider(ctx, rpcURL)
    if err != nil {
        log.Fatal("Failed to create client:", err)
    }

    // First, get a block with transactions to ensure we have valid data
    blockWithTxs, err := client.BlockWithTxHashes(ctx, rpc.WithBlockTag("latest"))
    if err != nil {
        log.Fatal("Failed to get block:", err)
    }

    // Print block info to see available transactions
    blockJSON, _ := json.Marshal(blockWithTxs)
    fmt.Printf("Block info: %s\n\n", blockJSON)

    // Get the first transaction (index 0) from the latest block
    blockID := rpc.WithBlockTag("latest")
    txIndex := uint64(0)

    transaction, err := client.TransactionByBlockIdAndIndex(ctx, blockID, txIndex)
    if err != nil {
        log.Fatal("Failed to get transaction:", err)
    }

    // Pretty print the transaction
    txJSON, err := json.MarshalIndent(transaction, "", "  ")
    if err != nil {
        log.Fatal("Failed to marshal transaction:", err)
    }

    fmt.Printf("Transaction at index %d:\n%s\n", txIndex, txJSON)
}
```
:::note
The example uses `BlockWithTxHashes` to first verify the block contains transactions. This method returns a block with transaction hashes only. See [BlockWithTxHashes](/docs/rpc/methods/block-with-tx-hashes) for more details.
:::

## Error Handling

```go
transaction, err := client.TransactionByBlockIdAndIndex(ctx, blockID, index)
if err != nil {
    log.Printf("Error getting transaction at index %d: %v", index, err)
    return
}

fmt.Printf("Retrieved transaction: %s\n", transaction.Hash.String())
```