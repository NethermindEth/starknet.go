# New

Creates a new Paymaster client instance for interacting with a SNIP-29 compliant paymaster service.

## Function Signature

```go
func New(ctx context.Context, url string, options ...client.ClientOption) (*Paymaster, error)
```

## Parameters

- `ctx` (context.Context): Context for the operation
- `url` (string): URL of the paymaster service
- `options` (...client.ClientOption): Optional client configuration options

## Returns

- `*Paymaster`: New paymaster client instance
- `error`: Error if client creation fails

## Description

Creates a paymaster client that implements the SNIP-29 paymaster API. The paymaster service sponsors transaction fees, allowing users to pay with alternative tokens or have their fees covered entirely.

## Usage Example

```go
package main

import (
	"context"
	"log"

	"github.com/NethermindEth/starknet.go/paymaster"
)

func main() {
	paymasterURL := "https://paymaster.example.com/rpc"
	ctx := context.Background()
	
	pm, err := paymaster.New(ctx, paymasterURL)
	if err != nil {
		log.Fatal(err)
	}
	
	// Use the paymaster client
	available, _ := pm.IsAvailable(ctx)
	if available {
		log.Println("Paymaster service is ready")
	}
}
```

## Use Cases

### 1. Gasless Transactions
```go
// Users don't need ETH/STRK for gas
pm, _ := paymaster.New(ctx, paymasterURL)
```

### 2. Alternative Fee Tokens
```go
// Pay fees with USDC, DAI, etc.
pm, _ := paymaster.New(ctx, paymasterURL)
tokens, _ := pm.GetSupportedTokens(ctx)
```

### 3. Sponsored dApps
```go
// dApp sponsors user transaction fees
pm, _ := paymaster.New(ctx, sponsorURL)
```

## Notes

- Requires a SNIP-29 compliant paymaster service
- The service URL should point to the JSON-RPC endpoint
- Client maintains cookies for session management

## Related Methods

- [IsAvailable](/docs/paymaster/methods/is-available)
- [GetSupportedTokens](/docs/paymaster/methods/get-supported-tokens)
- [BuildTransaction](/docs/paymaster/methods/build-transaction)
